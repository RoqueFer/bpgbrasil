<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Artigos - Boletim Paranaense de Geociências</title>

    <!-- Fontes e Ícones -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Alegreya+Sans:wght@400;700&family=Roboto:wght@700&family=Rubik+Dirt&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- CSS Externos -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout_artigos.css">

</head>

<body>
    <!-- Header customizado -->
    <meu-header></meu-header>

    <main>
        <div class="main-content-wrapper">
            <div class="container">
                <div class="content-area">
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="Buscar por título, autor, DOI..."
                            class="search-input">

                        <div class="dropdown">
                            <button class="filter-button" data-dropdown-button>Data ▼</button>
                            <div class="dropdown-content">
                                <a href="#" class="filter-option" data-filter-type="year" data-filter-value="all">Todos
                                    os Anos</a>
                                <a href="#" class="filter-option" data-filter-type="year"
                                    data-filter-value="2024">2024</a>
                                <a href="#" class="filter-option" data-filter-type="year"
                                    data-filter-value="2023">2023</a>
                                <a href="#" class="filter-option" data-filter-type="year"
                                    data-filter-value="2022">2022</a>
                                <a href="#" class="filter-option" data-filter-type="year"
                                    data-filter-value="2021">2021</a>
                                <a href="#" class="filter-option" data-filter-type="year"
                                    data-filter-value="2020">2020</a>
                            </div>
                        </div>

                        <div class="dropdown">
                            <button class="filter-button" data-dropdown-button>Edição ▼</button>
                            <div class="dropdown-content" id="edition-filter-options">
                                <a href="#" class="filter-option" data-filter-type="edition"
                                    data-filter-value="all">Todas as Edições</a>
                            </div>
                        </div>

                        <button class="filter-button" id="clear-filters-btn" title="Limpar todos os filtros">Limpar
                            filtro</button>
                    </div>

                    <div class="volume-section">
                        <h3 class="volume-title" id="volume-title">Todos os Artigos</h3>
                        <div class="articles-grid" id="articles-grid">

                            <!-- Lista completa de 17 artigos -->
                            <div class="article-card" data-year="2024" data-edition="Volume 82, N.1 (2024)"><span
                                    class="article-tag">Volume 82, N.1 (2024)</span>
                                <p><strong>- Artigo 1</strong></p>
                                <p>Autor: A. Silva</p>
                                <p>DOI: 10.1234/bpg.v82n1.1111</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 1 (2024)</h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce turpis lectus,
                                        blandit quis arcu quis, aliquam imperdiet nunc.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2024" data-edition="Volume 82, N.1 (2024)"><span
                                    class="article-tag">Volume 82, N.1 (2024)</span>
                                <p><strong>- Artigo 2</strong></p>
                                <p>Autor: B. Costa</p>
                                <p>DOI: 10.1234/bpg.v82n1.1112</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 2 (2024)</h4>
                                    <p>Aenean a nibh et leo iaculis sodales. Cras pellentesque tortor id scelerisque
                                        placerat. Curabitur viverra vel felis vel iaculis.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2023" data-edition="Volume 81, N.2 (2023)"><span
                                    class="article-tag">Volume 81, N.2 (2023)</span>
                                <p><strong>- Artigo 3</strong></p>
                                <p>Autor: C. Souza</p>
                                <p>DOI: 10.1234/bpg.v81n2.1113</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 3 (2023)</h4>
                                    <p>Nullam euismod turpis eget lectus pellentesque tincidunt. Vestibulum non suscipit
                                        ipsum, vel rutrum lorem.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2023" data-edition="Volume 81, N.1 (2023)"><span
                                    class="article-tag">Volume 81, N.1 (2023)</span>
                                <p><strong>- Artigo 4</strong></p>
                                <p>Autor: D. Martins</p>
                                <p>DOI: 10.1234/bpg.v81n1.1114</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 4 (2023)</h4>
                                    <p>Donec molestie leo vitae erat auctor porttitor. Aenean hendrerit blandit rutrum.
                                        Praesent magna nibh, iaculis nec viverra eget, tincidunt a justo.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2023" data-edition="Volume 81, N.1 (2023)"><span
                                    class="article-tag">Volume 81, N.1 (2023)</span>
                                <p><strong>- Artigo 5</strong></p>
                                <p>Autor: E. Lima</p>
                                <p>DOI: 10.1234/bpg.v81n1.1115</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 5 (2023)</h4>
                                    <p>Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus
                                        mus. Morbi aliquet ligula eget augue pulvinar tempus quis ut risus.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2022" data-edition="Volume 80, N.4 (2022)"><span
                                    class="article-tag">Volume 80, N.4 (2022)</span>
                                <p><strong>- Artigo 6</strong></p>
                                <p>Autor: F. Pereira</p>
                                <p>DOI: 10.1234/bpg.v80n4.1116</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 6 (2022)</h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce turpis lectus,
                                        blandit quis arcu quis, aliquam imperdiet nunc.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2022" data-edition="Volume 80, N.3 (2022)"><span
                                    class="article-tag">Volume 80, N.3 (2022)</span>
                                <p><strong>- Artigo 7</strong></p>
                                <p>Autor: G. Oliveira</p>
                                <p>DOI: 10.1234/bpg.v80n3.1117</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 7 (2022)</h4>
                                    <p>Aenean a nibh et leo iaculis sodales. Cras pellentesque tortor id scelerisque
                                        placerat. Curabitur viverra vel felis vel iaculis.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2022" data-edition="Volume 80, N.2 (2022)"><span
                                    class="article-tag">Volume 80, N.2 (2022)</span>
                                <p><strong>- Artigo 8</strong></p>
                                <p>Autor: H. Andrade</p>
                                <p>DOI: 10.1234/bpg.v80n2.1118</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 8 (2022)</h4>
                                    <p>Nullam euismod turpis eget lectus pellentesque tincidunt. Vestibulum non suscipit
                                        ipsum, vel rutrum lorem.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2022" data-edition="Volume 80, N.1 (2022)"><span
                                    class="article-tag">Volume 80, N.1 (2022)</span>
                                <p><strong>- Artigo 9</strong></p>
                                <p>Autor: I. Santos</p>
                                <p>DOI: 10.1234/bpg.v80n1.1119</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 9 (2022)</h4>
                                    <p>Donec molestie leo vitae erat auctor porttitor. Aenean hendrerit blandit rutrum.
                                        Praesent magna nibh, iaculis nec viverra eget, tincidunt a justo.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2021" data-edition="Volume 79, N.2 (2021)"><span
                                    class="article-tag">Volume 79, N.2 (2021)</span>
                                <p><strong>- Artigo 10</strong></p>
                                <p>Autor: J. Almeida</p>
                                <p>DOI: 10.1234/bpg.v79n2.1120</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 10 (2021)</h4>
                                    <p>Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus
                                        mus. Morbi aliquet ligula eget augue pulvinar tempus quis ut risus.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2021" data-edition="Volume 79, N.1 (2021)"><span
                                    class="article-tag">Volume 79, N.1 (2021)</span>
                                <p><strong>- Artigo 11</strong></p>
                                <p>Autor: K. Ferreira</p>
                                <p>DOI: 10.1234/bpg.v79n1.1121</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 11 (2021)</h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce turpis lectus,
                                        blandit quis arcu quis, aliquam imperdiet nunc.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2021" data-edition="Volume 79, N.1 (2021)"><span
                                    class="article-tag">Volume 79, N.1 (2021)</span>
                                <p><strong>- Artigo 12</strong></p>
                                <p>Autor: L. Ribeiro</p>
                                <p>DOI: 10.1234/bpg.v79n1.1122</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 12 (2021)</h4>
                                    <p>Aenean a nibh et leo iaculis sodales. Cras pellentesque tortor id scelerisque
                                        placerat. Curabitur viverra vel felis vel iaculis.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2020" data-edition="Volume 78, N.3 (2020)"><span
                                    class="article-tag">Volume 78, N.3 (2020)</span>
                                <p><strong>- Artigo 13</strong></p>
                                <p>Autor: M. Gonçalves</p>
                                <p>DOI: 10.1234/bpg.v78n3.1123</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 13 (2020)</h4>
                                    <p>Nullam euismod turpis eget lectus pellentesque tincidunt. Vestibulum non suscipit
                                        ipsum, vel rutrum lorem.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2020" data-edition="Volume 78, N.3 (2020)"><span
                                    class="article-tag">Volume 78, N.3 (2020)</span>
                                <p><strong>- Artigo 14</strong></p>
                                <p>Autor: N. Dias</p>
                                <p>DOI: 10.1234/bpg.v78n3.1124</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 14 (2020)</h4>
                                    <p>Donec molestie leo vitae erat auctor porttitor. Aenean hendrerit blandit rutrum.
                                        Praesent magna nibh, iaculis nec viverra eget, tincidunt a justo.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2020" data-edition="Volume 78, N.2 (2020)"><span
                                    class="article-tag">Volume 78, N.2 (2020)</span>
                                <p><strong>- Artigo 15</strong></p>
                                <p>Autor: O. Ramos</p>
                                <p>DOI: 10.1234/bpg.v78n2.1125</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 15 (2020)</h4>
                                    <p>Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus
                                        mus. Morbi aliquet ligula eget augue pulvinar tempus quis ut risus.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2020" data-edition="Volume 78, N.1 (2020)"><span
                                    class="article-tag">Volume 78, N.1 (2020)</span>
                                <p><strong>- Artigo 16</strong></p>
                                <p>Autor: P. Neves</p>
                                <p>DOI: 10.1234/bpg.v78n1.1126</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 16 (2020)</h4>
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce turpis lectus,
                                        blandit quis arcu quis, aliquam imperdiet nunc.</p>
                                </div>
                            </div>
                            <div class="article-card" data-year="2020" data-edition="Volume 78, N.1 (2020)"><span
                                    class="article-tag">Volume 78, N.1 (2020)</span>
                                <p><strong>- Artigo 17</strong></p>
                                <p>Autor: Q. Mendes</p>
                                <p>DOI: 10.1234/bpg.v78n1.1127</p>
                                <div class="article-summary-popup">
                                    <h4>Artigo 17 (2020)</h4>
                                    <p>Aenean a nibh et leo iaculis sodales. Cras pellentesque tortor id scelerisque
                                        placerat. Curabitur viverra vel felis vel iaculis.</p>
                                </div>
                            </div>

                        </div>
                        <div id="no-results">Nenhum artigo encontrado.</div>
                    </div>

                    <div class="pagination-container" id="pagination-container"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- O seu footer customizado -->
    <meu-footer></meu-footer>

    <!-- Scripts do seu site -->
    <script src="js/meu-header.js"></script>
    <script src="js/meu-footer.js"></script>

    <!-- SCRIPT DE FILTROS E PAGINAÇÃO -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('search-input');
            const articlesGrid = document.getElementById('articles-grid');
            const allArticles = Array.from(articlesGrid.querySelectorAll('.article-card'));
            const noResultsMsg = document.getElementById('no-results');
            const volumeTitle = document.getElementById('volume-title');
            const paginationContainer = document.getElementById('pagination-container');
            const clearFiltersBtn = document.getElementById('clear-filters-btn');

            const articlesPerPage = 8;
            let currentPage = 1;
            let currentFilteredArticles = [...allArticles];
            const activeFilters = { year: 'all', edition: 'all', search: '' };

            const setupPagination = () => {
                paginationContainer.innerHTML = '';
                const pageCount = Math.ceil(currentFilteredArticles.length / articlesPerPage);
                if (pageCount <= 1) return;

                const createPageLink = (page, text = page, isDisabled = false) => {
                    const link = document.createElement('a');
                    link.href = '#';
                    link.innerHTML = text;
                    link.className = 'page-link';
                    if (isDisabled) link.classList.add('disabled');
                    if (page === currentPage) link.classList.add('active');
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        if (!isDisabled && page !== currentPage) {
                            currentPage = page;
                            displayPage();
                        }
                    });
                    return link;
                };

                paginationContainer.appendChild(createPageLink(currentPage - 1, '&lt;', currentPage === 1));
                for (let i = 1; i <= pageCount; i++) {
                    paginationContainer.appendChild(createPageLink(i));
                }
                paginationContainer.appendChild(createPageLink(currentPage + 1, '&gt;', currentPage === pageCount));
            };

            const displayPage = () => {
                allArticles.forEach(article => article.style.display = 'none');
                const startIndex = (currentPage - 1) * articlesPerPage;
                const endIndex = startIndex + articlesPerPage;
                currentFilteredArticles.slice(startIndex, endIndex).forEach(article => {
                    article.style.display = 'flex';
                });
                setupPagination();
            };

            const applyFiltersAndPaginate = () => {
                currentFilteredArticles = allArticles.filter(article => {
                    const articleYear = article.dataset.year;
                    const articleEdition = article.dataset.edition;
                    const articleContent = article.textContent.toLowerCase();

                    const matchesYear = activeFilters.year === 'all' || activeFilters.year === articleYear;
                    const matchesEdition = activeFilters.edition === 'all' || activeFilters.edition === articleEdition;
                    const matchesSearch = activeFilters.search === '' || articleContent.includes(activeFilters.search);

                    return matchesYear && matchesEdition && matchesSearch;
                });

                noResultsMsg.style.display = currentFilteredArticles.length === 0 ? 'block' : 'none';
                currentPage = 1;
                displayPage();
            };

            document.addEventListener('click', e => {
                const isDropdownButton = e.target.matches("[data-dropdown-button]");
                if (!isDropdownButton && e.target.closest('.dropdown') === null) {
                    document.querySelectorAll(".dropdown.active").forEach(d => d.classList.remove("active"));
                }
                if (isDropdownButton) {
                    const currentDropdown = e.target.closest('.dropdown');
                    const wasActive = currentDropdown.classList.contains('active');
                    document.querySelectorAll(".dropdown.active").forEach(d => d.classList.remove("active"));
                    if (!wasActive) currentDropdown.classList.add('active');
                }
                if (e.target.classList.contains('filter-option')) {
                    e.preventDefault();
                    const { filterType, filterValue } = e.target.dataset;
                    activeFilters[filterType] = filterValue;

                    const dropdownButton = e.target.closest('.dropdown').querySelector('[data-dropdown-button]');
                    dropdownButton.textContent = filterValue === 'all' ? (filterType === 'year' ? 'Data ▼' : 'Edição ▼') : e.target.textContent;

                    if (filterType === 'year') {
                        volumeTitle.textContent = filterValue === 'all' ? 'Todos os Artigos' : `Artigos de ${filterValue}`;
                    } else if (filterType === 'edition') {
                        volumeTitle.textContent = filterValue === 'all' ? 'Todos os Artigos' : filterValue;
                    }

                    applyFiltersAndPaginate();
                    e.target.closest('.dropdown').classList.remove('active');
                }
            });

            searchInput.addEventListener('input', e => {
                activeFilters.search = e.target.value.toLowerCase();
                applyFiltersAndPaginate();
            });

            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', () => {
                    activeFilters.year = 'all';
                    activeFilters.edition = 'all';
                    activeFilters.search = '';
                    searchInput.value = '';
                    document.querySelectorAll('[data-dropdown-button]').forEach(button => {
                        const dropdownContent = button.nextElementSibling;
                        if (dropdownContent.querySelector('[data-filter-type="year"]')) { button.textContent = 'Data ▼'; }
                        else if (dropdownContent.querySelector('[data-filter-type="edition"]')) { button.textContent = 'Edição ▼'; }
                    });
                    volumeTitle.textContent = "Todos os Artigos";
                    applyFiltersAndPaginate();
                });
            }

            const editionDropdown = document.getElementById('edition-filter-options');
            if (editionDropdown) {
                const editions = [...new Set(Array.from(allArticles).map(a => a.dataset.edition))];
                editions.sort((a, b) => b.localeCompare(a, undefined, { numeric: true }));
                editions.forEach(edition => {
                    const link = document.createElement('a');
                    link.href = '#';
                    link.className = 'filter-option';
                    link.dataset.filterType = 'edition';
                    link.dataset.filterValue = edition;
                    link.textContent = edition;
                    editionDropdown.appendChild(link);
                });
            }

            // --- LÓGICA DA PRÉVIA (HOVER E TOQUE) ---
            articlesGrid.addEventListener('pointerover', e => {
                const card = e.target.closest('.article-card');
                if (!card || card.style.display === 'none') return;

                const popup = card.querySelector('.article-summary-popup');
                if (!popup) return;

                const cardRect = card.getBoundingClientRect();
                const gridRect = articlesGrid.getBoundingClientRect();

                // Horizontal (Desktop)
                if (window.innerWidth > 900) {
                    if (cardRect.left < gridRect.left + (gridRect.width / 2)) {
                        popup.classList.add('summary-show-right');
                        popup.classList.remove('summary-show-left');
                    } else {
                        popup.classList.add('summary-show-left');
                        popup.classList.remove('summary-show-right');
                    }
                }

                // Vertical (Mobile e Desktop)
                const viewportHeight = window.innerHeight;
                if (cardRect.top + (popup.offsetHeight / 2) > viewportHeight / 2) {
                    popup.classList.add('summary-align-bottom');
                    popup.classList.remove('summary-align-top');
                } else {
                    popup.classList.add('summary-align-top');
                    popup.classList.remove('summary-align-bottom');
                }
            });

            // --- INICIALIZAÇÃO ---
            applyFiltersAndPaginate();
        });
    </script>
</body>

</html>